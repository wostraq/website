{% macro navmenu(endpointprefix,pagename) %}
 <li
 {%- if request.endpoint.startswith(endpointprefix) -%}
  class="active"
 {%- endif -%}
 >
 
 <a href="#{{- endpointprefix.replace('.','_') -}}Submenu" data-toggle="collapse" aria-expanded="false">{{pagename}}</a>
 <ul class="collapse list-unstyled" id="{{- endpointprefix.replace('.','_') -}}Submenu">
{% endmacro %}

{% macro navitem(endpoint,pagename) %}
<li
 {%- if request.endpoint == endpoint -%}
  class="active"
 {%- endif -%}
 >
 <a href="{{url_for(endpoint)}}">{{pagename}}</a></li>
{% endmacro %}



<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="WOSTRAQ - West of Scotland Trainees Research, Audit and QI network">
        <meta name="author" content="WOSTRAQ">
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">

        <title>
        {% block title %}
            {%- if not page_title -%}
                 WOSTRAQ
            {%- else -%}
                {{ page_title }} - WOSTRAQ
            {%- endif -%}
        {% endblock %}
        </title>

        {% block stylesheets %}
        <!-- bootstrap css -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
        <link rel="stylesheet" href="/static/css/style.css">
        <!-- lato font -->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
        {% endblock %}

        {# for extra stylesheets. e.q. a template has to add something #}
        {% block css %}
        {% endblock %}

        {# for various extra things #}
        {% block head_extra %}
        {% endblock %}
    </head>

    <body>
        <div class="wrapper">

           <!-- Sidebar -->
           <nav id="sidebar">
           <!-- Sidebar Header -->
           <div class="sidebar-header">
              <h3>WOSTRAQ</div>
           </div>

           <!-- Sidebar Links -->
           <ul class="list-unstyled components">
              {{navitem('content.index','Home')}}
              {{navmenu('content.about','About')}}
                    {{navitem('content.about_membership','Membership')}}
                    {{navitem('content.about_local','Local leads')}}
                    {{navitem('content.about_committee','Committee')}}
                </ul>

              {{navmenu('content.projects','Projects')}}
                    {{navitem('content.projects_previous','Projects')}}
                    {{navitem('content.projects_propose','Propose a project')}}
               </ul>
          </ul>
     
          <ul class="list-unstyled CTAs">
             <li><a href="http://redcap.wostraq.net" class="download">Access the data entry tool</a></li>
             <li><a href="http://forums.wostraq.net" class="download">Access the members area</a></li>
          </ul>

          </nav>

           <!-- Page Content -->
              <div id="content">
                  <button type="button" id="sidebarCollapse" class="btn btn-info navbar-btn">
                  <i class="glyphicon glyphicon-align-left"></i>
                  Toggle Sidebar
                  </button>
                 Lorem ipsum etc
              </div>

        </div>       
        <!-- main forum layout -->
        <div class="flaskbb-layout">
            <div class="container">

                <!-- forum header - place for the project title and subtitle -->
                {% block header %}
                <div class="flaskbb-header">
                    <div class="flaskbb-meta">
                        <div class="flaskbb-title">{{ flaskbb_config["PROJECT_TITLE"] }}</div>
                        <div class="flaskbb-subtitle">{{ flaskbb_config["PROJECT_SUBTITLE"] }}</div>
                    </div>
                </div>
                {% endblock %}


                <!-- Place for all the (flashed) messages -->
                {% block messages %}
                <div id="flashed-messages">
                    {% with messages = get_flashed_messages(with_categories=True) %}
                        {% if messages %}
                          {% for category, message in messages %}
                            {% if category == 'error' %}
                             {% set icon = 'glyphicon glyphicon-exclamation-sign' %}
                            {% elif category == 'success' %}
                             {% set icon = 'glyphicon glyphicon-ok-sign' %}
                            {% else %}
                             {% set icon = 'glyphicon glyphicon-info-sign' %}
                            {% endif %}
                            <div class="alert alert-{{ category }}">
                             <span class="{{ icon }}"></span>&nbsp;
                             <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                              {{ message }}
                              </div>
                            {% endfor %}
                     {% endif %}
                   {% endwith %}
                </div>
                {% endblock %}

                <!-- the actual content block -->
                {% block content %}
                {% endblock %}
            </div> <!-- end container -->

            <!-- the forum footer -->
            {% block footer %}
            <footer class="footer">
                <div class="container">
                    <p class="text-muted pull-left">&copy; 2017 WOSTRAQ</p>
                </div>
            </footer>
            {% endblock %}

        </div> <!-- end flaskbb-layout -->

        {% block javascript %}
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
        <!-- Enable tooltips in all templates -->
        <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
        </script>
        {% endblock %}

        {# for extra scripts in other templates. #}
        {% block scripts %}
        {% endblock %}
    </body>
</html>
